<HTML>
<HEAD>
<META NAME="GENERATOR" Content="Microsoft Visual Studio 8.0">
<TITLE>康托展开――求数列是第几大数</TITLE>
</HEAD>
<BODY>
<p>
X=an*(n-1)!+an-1*(n-2)!+...+ai*(i-1)!+...+a2*1!+a1*0! 其中，a为整数，并且0<=ai<i(1<=i<=n)。
</p>
<h3>康托展开公式</h3>
<p>
把一个整数X展开成如下形式：<br />
X=a[n]*(n-1)!+a[n-1]*(n-2)!+...+a[i]*(i-1)!+...+a[2]*1!+a[1]*0!<br />
其中，a为整数，并且0<=a[i]<i(1<=i<=n) <br />
</p>
<h3>康托展开的应用实例</h3>
<p>
　　{1,2,3,4,...,n}表示1,2,3,...,n的排列如 {1,2,3} 按从小到大排列一共6个。123 132 213 231 312 321 。<br />
　　代表的数字 1 2 3 4 5 6 也就是把10进制数与一个排列对应起来。<br />
　　他们间的对应关系可由康托展开来找到。<br />
　　如我想知道321是{1,2,3}中第几个大的数可以这样考虑 ：<br />
　　第一位是3，当第一位的数小于3时，那排列数小于321 如 123、 213 ，小于3的数有1、2 。所以有2*2!个。再看小于第二位2的：小于2的数只有一个就是1 ，所以有1*1!=1 所以小于321的{1,2,3}排列数有2*2!+1*1!=5个。所以321是第6个大的数。 2*2!+1*1!是康托展开。<br />
　　再举个例子：1324是{1,2,3,4}排列数中第几个大的数：第一位是1小于1的数没有，是0个 0*3! 第二位是3小于3的数有1和2，但1已经在第一位了，所以只有一个数2 1*2! 。第三位是2小于2的数是1，但1在第一位，所以有0个数 0*1! ，所以比1324小的排列有0*3!+1*2!+0*1!=2个，1324是第三个大数。<br />
</p>
<h3>总结</h3>
<p>
康托展开是这样计算的：如数列1324,比3小且位置比3靠后只有2,所以有1 * 2!个{1yxx| y < 3}形式的数比{13xx}形式的数小,即这里只比较百位。所以，只要从千位到个位，计算少于它的数，累加起来便是知道它是第几大数(从0开始计算)。
</p>
<h3>逆康托展开</h3>
<p>
逆康托展开通过康托数，导出数列。<br />
以下来自网上例子：<br />
<pre>
例1 {1,2,3,4,5}的全排列，并且已经从小到大排序完毕
　　(1)找出第96个数
　　首先用96-1得到95
　　用95去除4! 得到3余23
　　用23去除3! 得到3余5
　　用5去除2!得到2余1
　　用1去除1!得到1余0有3个数比它小的数是4
　　所以第一位是4
　　有3个数比它小的数是4但4已经在之前出现过了所以是5（因为4在之前出现过了所以实际比5小的数是3个）
　　有2个数比它小的数是3
　　有1个数比它小的数是2
　　最后一个数只能是1
　　所以这个数是45321
　　(2)找出第16个数
　　首先用16-1得到15
　　用15去除4!得到0余15
　　用15去除3!得到2余3
　　用3去除2!得到1余1
　　用1去除1!得到1余0
　　有0个数比它小的数是1
　　有2个数比它小的数是3 但由于1已经在之前出现过了所以是4（因为1在之前出现过了所以实际比4小的数是2）
　　有1个数比它小的数是2 但由于1已经在之前出现过了所以是3（因为1在之前出现过了所以实际比3小的数是1）
　　有1个数比它小得数是2 但由于1，3，4已经在之前出现过了所以是5（因为1，3，4在之前出现过了所以实际比5小的数是1）
　　最后一个数只能是2
　　所以这个数是14352
</pre>
</p>
<h3>如何实现</h3>
<p>
由康托展开公式知道(n - 1)! >= a[n-1]*(n-2)!+...+a[i]*(i-1)!+...+a[2]*1!+a[1]*0!,所以a[n] = X / (n - 1)!,注意a[n]是第一位数
字大小比后面的位数字大的个数（或后面的比前面一位小的个数），结合前面例子，易知当a[n] = 0,则说明它是最小的，例如1。<br />
所以推导出的数列要符合前面的性质，结合前面例子，你发现有些数字是已用的，要忽略掉。编程时可以用一个数组记录数字使用情况，通过计算没
使用的个数，即可选出一个比它小a[n]个数的数字。
</p>
</BODY>
</HTML>
